# Device Service

#### This repository contains the initial setup for the Device Service, a Spring Boot application that will expose REST APIs for managing devices.

## Tech Stack

 - Java 21
 - Spring Boot 3.5
 - Maven
 - PostgreSQL
 - Docker & Docker Compose
 - Springdoc OpenAPI for documentation
 - JUnit 5 + Mockito for tests


### Device Model
- `id`: UUID, auto-generated by Hibernate
- `name`: String, required
- `brand`: String, required
- `state`: Enum (`AVAILABLE`, `IN_USE`, `INACTIVE`)
- `createdAt`: Timestamp, read-only

---

## Features
- Create a new device
- Fetch device by ID
- Fetch all devices
- Fetch devices by brand or state
- Partially or fully update a device
- Delete a device (with validation for in-use devices)
- Swagger/OpenAPI documentation
- Global exception handling

---

## Setup

### 1. Clone Repository
```
git clone https://github.com/yamunabm/device-service.git
cd device-service
```


### 2. Docker Compose
```
docker compose up --build
```

- App runs on: http://localhost:8000/device-service
- Postgres on: localhost:5432
- Profiles: dev via SPRING_PROFILES_ACTIVE

### 2. Running Locally (without Docker)

 - Ensure Postgres is running locally
 - Update application-local.yaml with DB credentials
 - Run via IntelliJ or:

```
mvn spring-boot:run "-Dspring-boot.run.arguments=--spring.profiles.active=local"
```

### 3. API Documentation
Swagger UI is available at:
```
http://localhost:8000/device-service/swagger-ui.html
```

### 4. Running Tests
```
mvn test "-Dspring.profiles.active=local"
```

### 4. Trade-offs / Limitations
1. Enum states are hard-coded. Adding a new state requires code changes.
2. Partial updates. Uses simple null-checks, no library like JSON Patch used.
3. I have kept the service as a concrete class since there is only one implementation. If multiple implementations were expected, I would extract an interface.
4. UUID Generation is currently handled by Hibernate. could also use Postgres gen_random_uuid().
5. Health check in Docker is Optional, app may fail if DB is not ready.
6. Logging: Basic logs in exception handler; no structured logging.
7. Security: Authentication/Authorization not implemented.
8. No caching: Repeated reads hit the database each time.